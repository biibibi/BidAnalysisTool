<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìã ÊäïÊ†áÊñá‰ª∂ÂêàËßÑÊÄßÊ£ÄÊµã - BidAnalysis Tool</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.0/font/bootstrap-icons.css">
    <link rel="icon" href="../static/icon/Unicom1.png" type="image/png">
    <style>
        :root {
            --primary-color: #2563eb;
            --secondary-color: #1d4ed8;
            --accent-color: #3b82f6;
            --success-color: #10b981;
            --danger-color: #ef4444;
            --warning-color: #f59e0b;
            --info-color: #06b6d4;
            --light-bg: #f8fafc;
            --border-color: #e2e8f0;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --card-shadow: 0 4px 6px rgba(0, 0, 0, 0.05), 0 10px 25px rgba(0, 0, 0, 0.1);
            --card-hover-shadow: 0 8px 25px rgba(0, 0, 0, 0.15), 0 20px 40px rgba(0, 0, 0, 0.12);
        }

        /* Á¥´Ëâ≤‰∏ªÈ¢ò */
        [data-theme="purple"] {
            --primary-color: #7c3aed;
            --secondary-color: #6d28d9;
            --accent-color: #8b5cf6;
            --success-color: #10b981;
            --danger-color: #ef4444;
            --warning-color: #f59e0b;
            --info-color: #06b6d4;
            --light-bg: #faf7ff;
            --border-color: #e9d5ff;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
        }

        /* ÁªøËâ≤‰∏ªÈ¢ò */
        [data-theme="green"] {
            --primary-color: #059669;
            --secondary-color: #047857;
            --accent-color: #10b981;
            --success-color: #22c55e;
            --danger-color: #ef4444;
            --warning-color: #f59e0b;
            --info-color: #06b6d4;
            --light-bg: #f0fdf4;
            --border-color: #d1fae5;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
        }

        /* Ê©ôËâ≤‰∏ªÈ¢ò */
        [data-theme="orange"] {
            --primary-color: #ea580c;
            --secondary-color: #c2410c;
            --accent-color: #f97316;
            --success-color: #10b981;
            --danger-color: #ef4444;
            --warning-color: #f59e0b;
            --info-color: #06b6d4;
            --light-bg: #fff7ed;
            --border-color: #fed7aa;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
        }

        /* Ê∑±Ëâ≤‰∏ªÈ¢ò */
        [data-theme="dark"] {
            --primary-color: #3b82f6;
            --secondary-color: #2563eb;
            --accent-color: #60a5fa;
            --success-color: #10b981;
            --danger-color: #ef4444;
            --warning-color: #f59e0b;
            --info-color: #06b6d4;
            --light-bg: #1f2937;
            --border-color: #374151;
            --text-primary: #f9fafb;
            --text-secondary: #d1d5db;
        }
        
        body {
            background: linear-gradient(135deg, var(--light-bg) 0%, #f1f5f9 100%);
            min-height: 100vh;
            padding: 0.5rem 0.5rem 50px 0.5rem;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            position: relative;
            overflow-x: hidden;
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        /* Ê∑±Ëâ≤‰∏ªÈ¢òËÉåÊôØ */
        [data-theme="dark"] body {
            background: linear-gradient(135deg, #111827 0%, #1f2937 100%);
        }

        /* È°∂ÈÉ®Â∑•ÂÖ∑Ê†èÊ†∑Âºè */
        .top-toolbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(15px);
            border-bottom: 1px solid var(--border-color);
            padding: 8px 20px;
            z-index: 1002;
            display: flex;
            justify-content: flex-end;
            align-items: center;
            gap: 15px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        [data-theme="dark"] .top-toolbar {
            background: rgba(31, 41, 55, 0.95);
            border-bottom-color: #374151;
        }

        .toolbar-button {
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 8px 12px;
            font-size: 0.8rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .toolbar-button:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
        }

        .theme-panel {
            position: relative;
        }

        .theme-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(15px);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            display: none;
            min-width: 200px;
            margin-top: 5px;
        }

        [data-theme="dark"] .theme-dropdown {
            background: rgba(31, 41, 55, 0.98);
            border-color: #374151;
        }

        .theme-dropdown.show {
            display: block;
            animation: fadeInDown 0.3s ease-out;
        }

        .theme-dropdown-title {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .theme-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }

        .theme-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: transparent;
        }

        .theme-item:hover {
            background: rgba(37, 99, 235, 0.05);
        }

        .theme-color-preview {
            width: 32px;
            height: 32px;
            border-radius: 6px;
            border: 2px solid transparent;
            margin-bottom: 5px;
            transition: all 0.3s ease;
        }

        .theme-item.active .theme-color-preview {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.2);
        }

        .theme-name {
            font-size: 0.7rem;
            color: var(--text-secondary);
            text-align: center;
        }

        .theme-item.active .theme-name {
            color: var(--primary-color);
            font-weight: 600;
        }

        /* ‰∏ªÈ¢òËâ≤ÂΩ©ÂÆö‰πâ */
        .color-blue { background: linear-gradient(135deg, #2563eb, #1d4ed8); }
        .color-purple { background: linear-gradient(135deg, #7c3aed, #6d28d9); }
        .color-green { background: linear-gradient(135deg, #059669, #047857); }
        .color-orange { background: linear-gradient(135deg, #ea580c, #c2410c); }
        .color-dark { background: linear-gradient(135deg, #374151, #1f2937); }

        /* ÁßªÂä®Á´ØÈÄÇÈÖç */
        @media (max-width: 768px) {
            .top-toolbar {
                padding: 6px 15px;
                gap: 10px;
            }
            
            .toolbar-button {
                padding: 6px 10px;
                font-size: 0.75rem;
            }
            
            .theme-dropdown {
                right: -10px;
                min-width: 180px;
            }
            
            .theme-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
            }
        }
        
        /* Ê∑ªÂä†ÂçäÈÄèÊòéËÉåÊôØÂõæÁâá */
        body::before {
            content: '';
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 600px;
            height: 600px;
            background-image: url('../static/icon/Unicom1.png');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            opacity: 0.08;
            z-index: -1;
            pointer-events: none;
        }
        
        .container {
            max-width: 1200px;
            position: relative;
            z-index: 1;
            margin-top: 40px; /* ÂáèÂ∞ëÈ°∂ÈÉ®Èó¥Ë∑ùÔºåÂè™Áïô40px */
        }
        
        .header {
            position: fixed;
            top: 20px; /* Âú®Â∑•ÂÖ∑Ê†è‰∏ãÊñπ */
            left: 0;
            right: 0;
            background: linear-gradient(135deg, 
                rgba(67, 97, 238, 0.95) 0%, 
                rgba(63, 55, 201, 0.95) 50%, 
                rgba(67, 97, 238, 0.95) 100%);
            backdrop-filter: blur(15px);
            border-bottom: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px 20px 0 0; /* Ê∑ªÂä†Â∫ïÈÉ®ÂúÜËßíÊïàÊûú */
            padding: 12px 30px;
            z-index: 1000;
            animation: fadeInDown 1s ease-out;
            box-shadow: 0 4px 25px rgba(67, 97, 238, 0.2);
            display: flex;
            align-items: center;
            gap: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.1), 
                transparent);
            animation: headerShine 3s ease-in-out infinite;
        }
        
        .header h1 {
            color: white;
            font-weight: 700;
            margin: 0;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 12px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            position: relative;
            flex: 1;
            justify-content: center;
            z-index: 2;
        }
        
        .header h1 i {
            color: white;
            font-size: 1.6rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .card {
            border: none;
            border-radius: 16px;
            box-shadow: var(--card-shadow);
            overflow: hidden;
            margin-bottom: 2rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            animation: fadeInUp 0.8s ease-out;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .card:hover {
            transform: translateY(-2px);
            box-shadow: var(--card-hover-shadow);
        }
        
        .card-header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 1.5rem 2rem;
            border-bottom: none;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(67, 97, 238, 0.25);
        }
        
        .card-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .card:hover .card-header::before {
            left: 100%;
        }
        
        .card-header h3 {
            margin: 0;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.3rem;
        }
        
        .card-body {
            padding: 0;
            background: rgba(255, 255, 255, 0.98);
            border-radius: 0 0 16px 16px;
            overflow: hidden;
        }
        
        /* Â∫üÊ†áÈ°πÂç°ÁâáÊ†∑Âºè */
        .violation-item {
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid rgba(67, 97, 238, 0.1);
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .violation-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--primary-color);
            transition: width 0.3s ease;
        }
        
        .violation-item:hover {
            transform: translateX(8px);
            box-shadow: 0 8px 25px rgba(67, 97, 238, 0.15);
            border-color: var(--primary-color);
        }
        
        .violation-item:hover::before {
            width: 8px;
        }
        
        .violation-header {
            display: flex;
            justify-content: between;
            align-items: flex-start;
            margin-bottom: 1rem;
            gap: 1rem;
        }
        
        .violation-info {
            flex: 1;
        }
        
        .violation-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #343a40;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .violation-category {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
        }
        
        .category-qualification {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            color: #1976d2;
        }
        
        .category-technical {
            background: linear-gradient(135deg, #f3e5f5, #e1bee7);
            color: #7b1fa2;
        }
        
        .category-commercial {
            background: linear-gradient(135deg, #e8f5e8, #c8e6c9);
            color: #388e3c;
        }
        
        .category-format {
            background: linear-gradient(135deg, #fff3e0, #ffcc02);
            color: #f57c00;
        }
        
        .category-time {
            background: linear-gradient(135deg, #ffebee, #ffcdd2);
            color: #d32f2f;
        }
        
        .violation-description {
            color: #6c757d;
            line-height: 1.6;
            margin-bottom: 1rem;
        }
        
        .violation-requirement {
            background: rgba(67, 97, 238, 0.05);
            border-left: 3px solid var(--primary-color);
            padding: 0.8rem 1rem;
            border-radius: 0 8px 8px 0;
            margin-bottom: 1rem;
            font-size: 0.95rem;
        }
        
        .violation-actions {
            display: flex;
            gap: 12px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .btn-detect {
            background: linear-gradient(135deg, var(--analyze-color), #5a189a);
            color: white;
            border: none;
            padding: 0.6rem 1.5rem;
            border-radius: 25px;
            font-weight: 500;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(114, 9, 183, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .btn-detect::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .btn-detect:hover::before {
            left: 100%;
        }
        
        .btn-detect:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(114, 9, 183, 0.4);
            color: white;
        }
        
        .btn-detect:disabled {
            background: linear-gradient(135deg, #cccccc, #999999);
            cursor: not-allowed;
            transform: none;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .detection-status {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .status-pending {
            color: #6c757d;
        }
        
        .status-detecting {
            color: var(--warning-color);
        }
        
        .status-compliant {
            color: var(--success-color);
        }
        
        .status-violation {
            color: var(--danger-color);
        }
        
        .status-warning {
            color: var(--warning-color);
        }
        
        /* AIÊ£ÄÊµãÁªìÊûúÂå∫Âüü */
        .ai-result-section {
            margin-top: 2rem;
            padding: 1.5rem;
            background: linear-gradient(145deg, #ffffff, #f8f9fa);
            border-radius: 15px;
            border-left: 5px solid var(--analyze-color);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            display: none;
            animation: fadeIn 0.6s ease;
        }
        
        .ai-result-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 1.5rem;
            color: var(--analyze-color);
            font-size: 1.3rem;
            font-weight: 600;
        }
        
        .ai-result-content {
            background: rgba(255, 255, 255, 0.8);
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 1.5rem;
        }
        
        .result-item {
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: 10px;
            border-left: 4px solid;
        }
        
        .result-compliant {
            background: rgba(76, 201, 240, 0.1);
            border-left-color: var(--success-color);
        }
        
        .result-violation {
            background: rgba(247, 37, 133, 0.1);
            border-left-color: var(--danger-color);
        }
        
        .result-warning {
            background: rgba(255, 193, 7, 0.1);
            border-left-color: var(--warning-color);
        }
        
        .result-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .result-description {
            color: #6c757d;
            line-height: 1.6;
        }
        
        /* ËøîÂõûÊåâÈíÆ */
        .back-button {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            padding: 10px 18px;
            border-radius: 25px;
            font-weight: 500;
            font-size: 0.9rem;
            box-shadow: 0 2px 10px rgba(67, 97, 238, 0.3);
            transition: all 0.3s ease;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
            white-space: nowrap;
        }
        
        .back-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(67, 97, 238, 0.4);
            color: white;
            text-decoration: none;
        }
        
        /* ËøõÂ∫¶ÊåáÁ§∫Âô® */
        .progress-indicator {
            background: linear-gradient(135deg, #ffffff, #f8f9fa);
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            border: 1px solid rgba(67, 97, 238, 0.1);
        }
        
        .progress-stats {
            display: flex;
            justify-content: space-around;
            text-align: center;
            margin-top: 1rem;
        }
        
        .stat-item {
            flex: 1;
        }
        
        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        
        .stat-label {
            color: #6c757d;
            font-size: 0.9rem;
        }
        
        .stat-pending .stat-number { color: #6c757d; }
        .stat-compliant .stat-number { color: var(--success-color); }
        .stat-violation .stat-number { color: var(--danger-color); }
        .stat-warning .stat-number { color: var(--warning-color); }
        
        /* Âä®ÁîªÊïàÊûú */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes slideIn {
            from { 
                opacity: 0; 
                transform: translateX(100%); 
            }
            to { 
                opacity: 1; 
                transform: translateX(0); 
            }
        }
        
        .spinner {
            animation: spin 1s linear infinite;
            display: inline-block;
        }
        
        /* È°µËÑöÊ†∑Âºè */
        .page-footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(67, 97, 238, 0.1);
            padding: 8px 20px;
            text-align: center;
            font-size: 0.85rem;
            color: #6c757d;
            z-index: 999;
        }
        
        /* ÂìçÂ∫îÂºèËÆæËÆ° */
        @media (max-width: 768px) {
            .container {
                max-width: 100%;
                padding: 0 1rem;
            }
            
            .header h1 {
                font-size: 1.2rem;
            }
            
            .header {
                padding: 10px 15px;
                gap: 10px;
            }
            
            .header h1 i {
                font-size: 1.1rem;
            }
            
            .back-button {
                padding: 6px 12px;
                font-size: 0.75rem;
                gap: 4px;
            }
            
            .back-button span {
                display: none; /* Âú®ÁßªÂä®Á´ØÈöêËóè"ËøîÂõû‰∏ªÈ°µ"ÊñáÂ≠óÔºåÂè™ÊòæÁ§∫ÂõæÊ†á */
            }
            
            .violation-header {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .violation-actions {
                justify-content: stretch;
            }
            
            .btn-detect {
                flex: 1;
                min-width: 120px;
            }
            
            .progress-stats {
                flex-direction: column;
                gap: 1rem;
            }
            
            .page-footer {
                font-size: 0.75rem;
                padding: 6px 10px;
            }
        }
        
        /* Ë°®Ê†ºÊ†∑Âºè */
        
        .table {
            margin-bottom: 0;
            font-size: 0.85rem;
            border-radius: 0 0 16px 16px;
            overflow: hidden;
            border: 2px solid var(--border-color);
            table-layout: fixed; /* Âõ∫ÂÆöË°®Ê†ºÂ∏ÉÂ±ÄÔºåÊèêÈ´òÊ∏≤ÊüìÊÄßËÉΩ */
            width: 100%;
        }
        
        .table thead {
            border-bottom: 3px solid var(--border-color);
            position: sticky; /* Á≤òÊÄßË°®Â§¥ */
            top: 0;
            z-index: 10;
        }
        
        .table th {
            background: white;
            color: var(--text-primary);
            border: 2px solid var(--border-color);
            font-weight: 600;
            padding: 0.7rem 0.5rem;
            font-size: 0.85rem;
            text-align: center;
            vertical-align: middle;
            white-space: nowrap;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        }
        
        .table th:first-child {
            border-top-left-radius: 0;
            border-left: 2px solid var(--border-color);
        }
        
        .table th:last-child {
            border-top-right-radius: 0;
            border-right: 2px solid var(--border-color);
        }
        
        .table td {
            padding: 0.5rem 0.4rem;
            vertical-align: middle;
            border-top: 1px solid var(--border-color);
            font-size: 0.8rem;
            color: var(--text-primary);
        }
        
        .table tbody tr:hover {
            background-color: rgba(37, 99, 235, 0.04);
        }
        
        .check-category {
            padding: 0.15rem 0.4rem;
            border-radius: 8px;
            font-size: 0.7rem;
            font-weight: 500;
            display: inline-block;
            white-space: nowrap;
            text-align: center;
        }
        
        .check-title {
            font-weight: 600;
            color: #343a40;
            font-size: 0.8rem;
            margin-bottom: 0.1rem;
            line-height: 1.3;
        }
        
        .check-description {
            color: #6c757d;
            font-size: 0.75rem;
            line-height: 1.3;
        }
        
        .btn-check {
            background: linear-gradient(135deg, var(--success-color), #059669);
            color: white;
            border: none;
            padding: 0.25rem 0.6rem;
            border-radius: 8px;
            font-weight: 500;
            font-size: 0.75rem;
            transition: all 0.3s ease;
            white-space: nowrap;
        }
        
        .btn-check:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }
        
        .btn-check:disabled {
            background: var(--text-secondary);
            cursor: not-allowed;
            transform: none;
        }
        
        .status-badge {
            padding: 0.15rem 0.4rem;
            border-radius: 8px;
            font-size: 0.7rem;
            font-weight: 500;
            white-space: nowrap;
            display: inline-block;
            text-align: center;
        }
        
        .status-pending {
            background: var(--light-bg);
            color: var(--text-secondary);
            border: 1px solid var(--border-color);
        }
        
        .status-checking {
            background: linear-gradient(135deg, var(--warning-color), #e97f0b);
            color: white;
        }
        
        .status-pass {
            background: linear-gradient(135deg, var(--success-color), #059669);
            color: white;
        }
        
        .status-fail {
            background: linear-gradient(135deg, var(--danger-color), #dc2626);
            color: white;
        }
        
        .result-cell {
            max-width: 120px;
            word-wrap: break-word;
            font-size: 0.75rem;
            line-height: 1.3;
        }
        
        .serial-number {
            font-weight: 600;
            color: var(--primary-color);
            text-align: center;
        }

        /* ÊâπÈáèÊìç‰ΩúÊåâÈíÆ */
        .batch-actions {
            text-align: center;
            margin: 2rem 0;
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap; /* ÂìçÂ∫îÂºèÊç¢Ë°å */
        }
        
        .btn-batch {
            background: linear-gradient(135deg, var(--success-color), #38b000);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 50px;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.4s ease;
            box-shadow: 0 6px 20px rgba(76, 201, 240, 0.3);
            flex: 0 1 auto; /* ÂºπÊÄßÂ∏ÉÂ±Ä */
            min-width: 200px; /* ÊúÄÂ∞èÂÆΩÂ∫¶ */
        }
        
        .btn-batch:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(76, 201, 240, 0.4);
            color: white;
        }
        
        .btn-batch:disabled {
            background: linear-gradient(135deg, #cccccc, #999999);
            cursor: not-allowed;
            transform: none;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        /* ÁßªÂä®Á´ØÊâπÈáèÊìç‰ΩúÊåâÈíÆË∞ÉÊï¥ */
        @media (max-width: 768px) {
            .batch-actions {
                flex-direction: column;
                align-items: center;
            }
            
            .btn-batch {
                width: 100%;
                max-width: 300px;
                font-size: 1rem;
                padding: 0.8rem 1.5rem;
            }
        }
    </style>
</head>

<body>
    <!-- È°∂ÈÉ®Â∑•ÂÖ∑Ê†è -->
    <div class="top-toolbar">
        <div class="theme-panel">
            <button class="toolbar-button" id="themeToggle">
                <i class="bi bi-palette"></i> ‰∏ªÈ¢ò
            </button>
            <div class="theme-dropdown" id="themeDropdown">
                <div class="theme-dropdown-title">
                    <i class="bi bi-palette"></i> ÈÄâÊã©‰∏ªÈ¢ò
                </div>
                <div class="theme-grid">
                    <div class="theme-item active" data-theme="default">
                        <div class="theme-color-preview color-blue"></div>
                        <div class="theme-name">ÈªòËÆ§ËìùËâ≤</div>
                    </div>
                    <div class="theme-item" data-theme="purple">
                        <div class="theme-color-preview color-purple"></div>
                        <div class="theme-name">È´òË¥µÁ¥´Ëâ≤</div>
                    </div>
                    <div class="theme-item" data-theme="green">
                        <div class="theme-color-preview color-green"></div>
                        <div class="theme-name">Ëá™ÁÑ∂ÁªøËâ≤</div>
                    </div>
                    <div class="theme-item" data-theme="orange">
                        <div class="theme-color-preview color-orange"></div>
                        <div class="theme-name">Ê¥ªÂäõÊ©ôËâ≤</div>
                    </div>
                    <div class="theme-item" data-theme="dark">
                        <div class="theme-color-preview color-dark"></div>
                        <div class="theme-name">Ê∑±Ëâ≤Ê®°Âºè</div>
                    </div>
                </div>
            </div>
        </div>
        <button class="toolbar-button" id="helpBtn">
            <i class="bi bi-question-circle"></i> ‰ΩøÁî®ÊåáÂçó
        </button>
    </div>

    <div class="container">
        <div class="header">
            <a href="/" class="back-button">
                <i class="bi bi-arrow-left"></i> <span>ËøîÂõû‰∏ªÈ°µ</span>
            </a>
            <h1><i class="bi bi-clipboard-check"></i> ÊäïÊ†áÊñá‰ª∂ÂêàËßÑÊÄßÊ£ÄÊµã</h1>
        </div>

        <!-- ËøõÂ∫¶ÊåáÁ§∫Âô® -->
        <div class="progress-indicator">
            <div class="progress-stats">
                <div class="stat-item stat-pending">
                    <div class="stat-number" id="pendingCount">15</div>
                    <div class="stat-label">ÂæÖÊ£ÄÊµã</div>
                </div>
                <div class="stat-item stat-compliant">
                    <div class="stat-number" id="compliantCount">0</div>
                    <div class="stat-label">ÂêàËßÑ</div>
                </div>
                <div class="stat-item stat-warning">
                    <div class="stat-number" id="warningCount">0</div>
                    <div class="stat-label">Ë≠¶Âëä</div>
                </div>
                <div class="stat-item stat-violation">
                    <div class="stat-number" id="violationCount">0</div>
                    <div class="stat-label">ËøùËßÑ</div>
                </div>
            </div>
        </div>

        <!-- ÊâπÈáèÊìç‰Ωú -->
        <div class="batch-actions">
            <button class="btn btn-batch" id="checkAllBtn">
                <i class="bi bi-check-all"></i> ‰∏ÄÈîÆÊ£ÄÊµãÂÖ®ÈÉ®
            </button>
            <button class="btn btn-batch" id="exportReportBtn" disabled>
                <i class="bi bi-download"></i> ÂØºÂá∫Ê£ÄÊµãÊä•Âëä
            </button>
        </div>

        <!-- Â∫üÊ†áÈ°πÊ£ÄÊµãÂàóË°® -->
        <div class="card">
            <div class="card-header">
                <h3><i class="bi bi-list-check"></i> Â∏∏ËßÅÂ∫üÊ†áÈ°πÊ£ÄÊµãÊ∏ÖÂçï</h3>
            </div>
            <div class="card-body">
                <table class="table table-hover mb-0">
                    <thead>
                        <tr>
                            <th style="width: 10%;">Â∫èÂè∑</th>
                            <th style="width: 12%;">Á±ªÂà´</th>
                            <th style="width: 20%;">Ê£ÄÊµãÈ°πÁõÆ</th>
                            <th style="width: 25%;">Ë¶ÅÊ±ÇËØ¥Êòé</th>
                            <th style="width: 10%;">Áä∂ÊÄÅ</th>
                            <th style="width: 10%;">Êìç‰Ωú</th>
                            <th style="width: 13%;">Ê£ÄÊµãÁªìÊûú</th>
                        </tr>
                    </thead>
                    <tbody id="violationTableBody">
                        <!-- Â∫üÊ†áÈ°πÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- AIÁªºÂêàÊ£ÄÊµãÁªìÊûú -->
        <div class="ai-result-section" id="aiResultSection">
            <div class="ai-result-header">
                <i class="bi bi-robot"></i>
                AIÊô∫ËÉΩÂàÜÊûêÁªìÊûú
            </div>
            <div class="ai-result-content" id="aiResultContent">
                <!-- AIÂàÜÊûêÁªìÊûúÂ∞ÜÂú®ËøôÈáåÊòæÁ§∫ -->
            </div>
        </div>
    </div>

    <script>
        // Â∏∏ËßÅÂ∫üÊ†áÈ°πÊï∞ÊçÆ - Âü∫‰∫éÂÆûÈôÖÊäïÊ†áË¶ÅÊ±ÇÊï¥ÁêÜ
        const violationItems = [
            {
                id: 'qualification_license',
                title: 'Ëê•‰∏öÊâßÁÖßÂèäËµÑË¥®ËØÅ‰π¶',
                category: 'ËµÑË¥®Ë¶ÅÊ±Ç',
                categoryClass: 'category-qualification',
                description: 'Ê£ÄÊü•ÊòØÂê¶Êèê‰æõÊúâÊïàÁöÑËê•‰∏öÊâßÁÖß„ÄÅÁõ∏ÂÖ≥ËµÑË¥®ËØÅ‰π¶ÔºåËØÅ‰π¶ÊòØÂê¶Âú®ÊúâÊïàÊúüÂÜÖ',
                requirement: 'ÂøÖÈ°ªÊèê‰æõËê•‰∏öÊâßÁÖßÂ§çÂç∞‰ª∂Âπ∂Âä†ÁõñÂÖ¨Á´†ÔºåÁõ∏ÂÖ≥Ë°å‰∏öËµÑË¥®ËØÅ‰π¶ÂøÖÈ°ªÂú®ÊúâÊïàÊúüÂÜÖ',
                icon: 'bi-award'
            },
            {
                id: 'performance_requirement',
                title: '‰∏öÁª©Ë¶ÅÊ±Ç',
                category: 'ËµÑË¥®Ë¶ÅÊ±Ç', 
                categoryClass: 'category-qualification',
                description: 'Ê£ÄÊü•ÊòØÂê¶Êª°Ë∂≥ÊãõÊ†áÊñá‰ª∂ËßÑÂÆöÁöÑËøëÂπ¥Êù•Á±ª‰ººÈ°πÁõÆ‰∏öÁª©Ë¶ÅÊ±Ç',
                requirement: 'Êèê‰æõËøë3Âπ¥ÂÜÖÁ±ª‰ººÈ°πÁõÆ‰∏öÁª©ËØÅÊòéÊùêÊñôÔºåÂåÖÊã¨ÂêàÂêåÂ§çÂç∞‰ª∂ÂíåÂÆ¢Êà∑ËØÅÊòé',
                icon: 'bi-graph-up'
            },
            {
                id: 'technical_specs',
                title: 'ÊäÄÊúØËßÑÊ†ºÂìçÂ∫î',
                category: 'ÊäÄÊúØË¶ÅÊ±Ç',
                categoryClass: 'category-technical',
                description: 'Ê£ÄÊü•ÊäÄÊúØÊñπÊ°àÊòØÂê¶ÂÆåÂÖ®ÂìçÂ∫îÊãõÊ†áÊñá‰ª∂ÁöÑÊäÄÊúØËßÑÊ†ºË¶ÅÊ±Ç',
                requirement: 'ÊäÄÊúØÊñπÊ°àÂøÖÈ°ªÈÄêÊù°ÂìçÂ∫îÊãõÊ†áÊñá‰ª∂ÊäÄÊúØËßÑÊ†ºÔºå‰∏çÂæóÊúâË¥üÂÅèÁ¶ª',
                icon: 'bi-gear'
            },
            {
                id: 'technical_standards',
                title: 'ÊäÄÊúØÊ†áÂáÜÁ¨¶ÂêàÊÄß',
                category: 'ÊäÄÊúØË¶ÅÊ±Ç',
                categoryClass: 'category-technical', 
                description: 'Ê£ÄÊü•‰∫ßÂìÅÊàñÊúçÂä°ÊòØÂê¶Á¨¶ÂêàÂõΩÂÆ∂„ÄÅË°å‰∏öÁõ∏ÂÖ≥ÊäÄÊúØÊ†áÂáÜ',
                requirement: 'ÂøÖÈ°ªÁ¨¶ÂêàÂõΩÊ†á„ÄÅË°åÊ†áÁ≠âÁõ∏ÂÖ≥ÊäÄÊúØÊ†áÂáÜÔºåÊèê‰æõÊ†áÂáÜÁ¨¶ÂêàÊÄßÂ£∞Êòé',
                icon: 'bi-clipboard-check'
            },
            {
                id: 'price_format',
                title: 'Êä•‰ª∑Ê†ºÂºè',
                category: 'ÂïÜÂä°Ë¶ÅÊ±Ç',
                categoryClass: 'category-commercial',
                description: 'Ê£ÄÊü•ÊäïÊ†áÊä•‰ª∑ÊòØÂê¶ÊåâÁÖßÊãõÊ†áÊñá‰ª∂ËßÑÂÆöÁöÑÊ†ºÂºèÂ°´ÂÜô',
                requirement: '‰∏•Ê†ºÊåâÁÖßÊãõÊ†áÊñá‰ª∂Êèê‰æõÁöÑÊä•‰ª∑Ë°®Ê†ºÂºèÂ°´ÂÜôÔºå‰∏çÂæó‰øÆÊîπË°®Ê†ºÁªìÊûÑ',
                icon: 'bi-currency-dollar'
            },
            {
                id: 'price_calculation',
                title: '‰ª∑Ê†ºËÆ°ÁÆóÂáÜÁ°ÆÊÄß',
                category: 'ÂïÜÂä°Ë¶ÅÊ±Ç',
                categoryClass: 'category-commercial',
                description: 'Ê£ÄÊü•ÊäïÊ†áÊä•‰ª∑ËÆ°ÁÆóÊòØÂê¶ÂáÜÁ°ÆÔºåÊòØÂê¶ÊúâËÆ°ÁÆóÈîôËØØ',
                requirement: 'ÊâÄÊúâ‰ª∑Ê†ºËÆ°ÁÆóÂøÖÈ°ªÂáÜÁ°ÆÊó†ËØØÔºåÂ§ßÂ∞èÂÜôÈáëÈ¢ùÂøÖÈ°ª‰∏ÄËá¥',
                icon: 'bi-calculator'
            },
            {
                id: 'payment_terms',
                title: '‰ªòÊ¨æÊù°‰ª∂',
                category: 'ÂïÜÂä°Ë¶ÅÊ±Ç',
                categoryClass: 'category-commercial',
                description: 'Ê£ÄÊü•‰ªòÊ¨æÊù°‰ª∂ÊòØÂê¶Á¨¶ÂêàÊãõÊ†áÊñá‰ª∂Ë¶ÅÊ±Ç',
                requirement: '‰ªòÊ¨æÊù°‰ª∂‰∏çÂæóÂÅèÁ¶ªÊãõÊ†áÊñá‰ª∂Ë¶ÅÊ±ÇÔºå‰∏çÂæóÂ¢ûÂä†È¢ùÂ§ñ‰ªòÊ¨æÊù°‰ª∂',
                icon: 'bi-credit-card'
            },
            {
                id: 'delivery_period',
                title: '‰∫§Ë¥ßÊúü',
                category: 'ÂïÜÂä°Ë¶ÅÊ±Ç',
                categoryClass: 'category-commercial',
                description: 'Ê£ÄÊü•ÊâøËØ∫ÁöÑ‰∫§Ë¥ßÊúüÊòØÂê¶Êª°Ë∂≥ÊãõÊ†áÊñá‰ª∂Ë¶ÅÊ±Ç',
                requirement: '‰∫§Ë¥ßÊúü‰∏çÂæóË∂ÖËøáÊãõÊ†áÊñá‰ª∂ËßÑÂÆöÁöÑÊúÄÈïø‰∫§Ë¥ßÊúü',
                icon: 'bi-truck'
            },
            {
                id: 'document_binding',
                title: 'Êñá‰ª∂Ë£ÖËÆ¢',
                category: 'Ê†ºÂºèË¶ÅÊ±Ç',
                categoryClass: 'category-format',
                description: 'Ê£ÄÊü•ÊäïÊ†áÊñá‰ª∂ÊòØÂê¶ÊåâË¶ÅÊ±ÇË£ÖËÆ¢ÔºåÂ∞ÅÈù¢Ê†ºÂºèÊòØÂê¶Ê≠£Á°Æ',
                requirement: 'ÊåâÁÖßÊãõÊ†áÊñá‰ª∂Ë¶ÅÊ±ÇË£ÖËÆ¢ÔºåÊ≠£Êú¨1‰ªΩ„ÄÅÂâØÊú¨Ëã•Âπ≤‰ªΩÔºåÂ∞ÅÈù¢Ê†ºÂºèÁªü‰∏Ä',
                icon: 'bi-book'
            },
            {
                id: 'signature_seal',
                title: 'Á≠æÂêçÁõñÁ´†',
                category: 'Ê†ºÂºèË¶ÅÊ±Ç',
                categoryClass: 'category-format',
                description: 'Ê£ÄÊü•ÊäïÊ†áÊñá‰ª∂ÊòØÂê¶ÊåâË¶ÅÊ±ÇÁ≠æÂêçÁõñÁ´†ÔºåÂç∞Á´†ÊòØÂê¶Ê∏ÖÊô∞',
                requirement: 'Ê≥ïÂÆö‰ª£Ë°®‰∫∫Á≠æÂ≠óÊàñÊéàÊùÉ‰ª£Ë°®Á≠æÂ≠óÔºåÂä†Áõñ‰ºÅ‰∏öÂÖ¨Á´†ÔºåÂç∞Á´†Ê∏ÖÊô∞',
                icon: 'bi-patch-check'
            },
            {
                id: 'page_numbering',
                title: 'È°µÁ†ÅÁºñÂà∂',
                category: 'Ê†ºÂºèË¶ÅÊ±Ç',
                categoryClass: 'category-format',
                description: 'Ê£ÄÊü•ÊäïÊ†áÊñá‰ª∂È°µÁ†ÅÊòØÂê¶ËøûÁª≠ÁºñÂà∂ÔºåÊòØÂê¶ÊúâÈÅóÊºè',
                requirement: 'ÊäïÊ†áÊñá‰ª∂ÂøÖÈ°ªËøûÁª≠ÁºñÂà∂È°µÁ†ÅÔºå‰∏çÂæóÊúâÁº∫È°µ„ÄÅÊºèÈ°µÁé∞Ë±°',
                icon: 'bi-123'
            },
            {
                id: 'submission_deadline',
                title: 'ÈÄí‰∫§Êó∂Èó¥',
                category: 'Êó∂Èó¥Ë¶ÅÊ±Ç',
                categoryClass: 'category-time',
                description: 'Ê£ÄÊü•ÊäïÊ†áÊñá‰ª∂ÊòØÂê¶Âú®ËßÑÂÆöÊó∂Èó¥ÂÜÖÈÄí‰∫§',
                requirement: 'ÂøÖÈ°ªÂú®ÊãõÊ†áÊñá‰ª∂ËßÑÂÆöÁöÑÊäïÊ†áÊà™Ê≠¢Êó∂Èó¥ÂâçÈÄí‰∫§ÊäïÊ†áÊñá‰ª∂',
                icon: 'bi-clock'
            },
            {
                id: 'validity_period',
                title: 'ÊäïÊ†áÊúâÊïàÊúü',
                category: 'Êó∂Èó¥Ë¶ÅÊ±Ç',
                categoryClass: 'category-time',
                description: 'Ê£ÄÊü•ÊäïÊ†áÊñá‰ª∂ÊâøËØ∫ÁöÑÊúâÊïàÊúüÊòØÂê¶Êª°Ë∂≥Ë¶ÅÊ±Ç',
                requirement: 'ÊäïÊ†áÊúâÊïàÊúü‰∏çÂæóÂ∞ë‰∫éÊãõÊ†áÊñá‰ª∂ËßÑÂÆöÁöÑÊúÄÁü≠ÊúâÊïàÊúü',
                icon: 'bi-calendar-check'
            },
            {
                id: 'bid_bond',
                title: 'ÊäïÊ†á‰øùËØÅÈáë',
                category: 'ÂïÜÂä°Ë¶ÅÊ±Ç',
                categoryClass: 'category-commercial',
                description: 'Ê£ÄÊü•ÊòØÂê¶ÊåâË¶ÅÊ±ÇÊèê‰∫§ÊäïÊ†á‰øùËØÅÈáëÔºåÈáëÈ¢ùÊòØÂê¶Ê≠£Á°Æ',
                requirement: 'ÊåâÊãõÊ†áÊñá‰ª∂Ë¶ÅÊ±ÇÊèê‰∫§ÊäïÊ†á‰øùËØÅÈáëÔºåÈáëÈ¢ùÂáÜÁ°ÆÔºåÂΩ¢ÂºèÁ¨¶ÂêàË¶ÅÊ±Ç',
                icon: 'bi-shield-check'
            },
            {
                id: 'authorization_letter',
                title: 'ÊéàÊùÉÂßîÊâò‰π¶',
                category: 'Ê†ºÂºèË¶ÅÊ±Ç',
                categoryClass: 'category-format',
                description: 'Ê£ÄÊü•ÊéàÊùÉÂßîÊâò‰π¶Ê†ºÂºèÊòØÂê¶Ê≠£Á°ÆÔºåÊéàÊùÉËåÉÂõ¥ÊòØÂê¶ÊòéÁ°Æ',
                requirement: 'Ê≥ïÂÆö‰ª£Ë°®‰∫∫ÊéàÊùÉÂßîÊâò‰π¶Ê†ºÂºèÊ≠£Á°ÆÔºåÊéàÊùÉËåÉÂõ¥ÊòéÁ°ÆÔºåÂç∞Á´†ÈΩêÂÖ®',
                icon: 'bi-person-check'
            }
        ];

        // È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            initializePage();
            setupEventListeners();
            initThemeSwitcher();
        });

        // ÂàùÂßãÂåñÈ°µÈù¢
        function initializePage() {
            // ËØªÂèñ‰ªéindexÈ°µÈù¢‰º†ÈÄíÁöÑÊñá‰ª∂‰ø°ÊÅØ
            const tenderFileId = sessionStorage.getItem('tenderFileId');
            const bidFileId = sessionStorage.getItem('bidFileId');
            const tenderFileName = sessionStorage.getItem('tenderFileName');
            const bidFileName = sessionStorage.getItem('bidFileName');
            
            // Â¶ÇÊûúÊúâÊñá‰ª∂‰ø°ÊÅØÔºåÊòæÁ§∫Âú®È°µÈù¢‰∏≠
            if (tenderFileName || bidFileName) {
                console.log('Êé•Êî∂Âà∞Êñá‰ª∂‰ø°ÊÅØ:', {
                    tenderFileId,
                    bidFileId,
                    tenderFileName,
                    bidFileName
                });
                
                // ÂèØ‰ª•Âú®ËøôÈáåÊõ¥Êñ∞È°µÈù¢ÊòæÁ§∫ÔºåÊØîÂ¶ÇÂú®È°µÈù¢Â§¥ÈÉ®ÊòæÁ§∫ÂΩìÂâçÂàÜÊûêÁöÑÊñá‰ª∂
                updateFileInfoDisplay(tenderFileName, bidFileName);
            }
            
            renderViolationItems();
            updateProgressStats();
        }
        
        // Êõ¥Êñ∞Êñá‰ª∂‰ø°ÊÅØÊòæÁ§∫
        function updateFileInfoDisplay(tenderFileName, bidFileName) {
            // Âú®È°µÈù¢Â§¥ÈÉ®ÊàñÈÄÇÂΩì‰ΩçÁΩÆÊòæÁ§∫ÂΩìÂâçÂàÜÊûêÁöÑÊñá‰ª∂‰ø°ÊÅØ
            const headerElement = document.querySelector('.header h1');
            if (headerElement && (tenderFileName || bidFileName)) {
                let fileInfo = '';
                if (tenderFileName && bidFileName) {
                    fileInfo = ` (ÊãõÊ†áÊñá‰ª∂: ${tenderFileName}, ÊäïÊ†áÊñá‰ª∂: ${bidFileName})`;
                } else if (tenderFileName) {
                    fileInfo = ` (ÊãõÊ†áÊñá‰ª∂: ${tenderFileName})`;
                } else if (bidFileName) {
                    fileInfo = ` (ÊäïÊ†áÊñá‰ª∂: ${bidFileName})`;
                }
                
                // Ê∑ªÂä†Êñá‰ª∂‰ø°ÊÅØÂà∞Ê†áÈ¢ò‰∏≠Ôºå‰ΩÜ‰øùÊåÅÁÆÄÊ¥Å
                const originalTitle = headerElement.textContent.split(' (')[0];
                headerElement.innerHTML = `<i class="bi bi-clipboard-check"></i> ${originalTitle}`;
                
                // Âú®Ê†áÈ¢ò‰∏ãÊñπÊ∑ªÂä†Êñá‰ª∂‰ø°ÊÅØ
                if (!document.querySelector('.file-info-display')) {
                    const fileInfoDiv = document.createElement('div');
                    fileInfoDiv.className = 'file-info-display';
                    fileInfoDiv.style.cssText = 'font-size: 0.9rem; color: rgba(255,255,255,0.8); margin-top: 0.5rem;';
                    fileInfoDiv.textContent = fileInfo.substring(2); // ÂéªÊéâÂºÄÂ§¥ÁöÑÁ©∫Ê†ºÂíåÊã¨Âè∑
                    headerElement.parentElement.appendChild(fileInfoDiv);
                }
            }
        }

        // Ê∏≤ÊüìÂ∫üÊ†áÈ°πÂàóË°®
        function renderViolationItems() {
            const violationTableBody = document.getElementById('violationTableBody');
            
            violationItems.forEach((item, index) => {
                const itemHtml = `
                    <tr data-id="${item.id}">
                        <td class="serial-number">${index + 1}</td>
                        <td>
                            <span class="check-category ${item.categoryClass}">
                                ${item.category}
                            </span>
                        </td>
                        <td>
                            <div class="check-title">
                                <i class="bi ${item.icon}"></i>
                                ${item.title}
                            </div>
                        </td>
                        <td>
                            <div class="check-description">
                                ${item.requirement}
                            </div>
                        </td>
                        <td>
                            <span class="status-badge status-pending" id="status-${item.id}">
                                ÂæÖÊ£ÄÊµã
                            </span>
                        </td>
                        <td>
                            <button class="btn btn-check" onclick="startDetection('${item.id}')">
                                ÂºÄÂßãÊ£ÄÊµã
                            </button>
                        </td>
                        <td class="result-cell" id="result-${item.id}">
                            <span class="text-muted">-</span>
                        </td>
                    </tr>
                `;
                violationTableBody.innerHTML += itemHtml;
            });
        }

        // ËÆæÁΩÆ‰∫ã‰ª∂ÁõëÂê¨Âô®
        function setupEventListeners() {
            // ‰∏ÄÈîÆÊ£ÄÊµãÂÖ®ÈÉ®
            document.getElementById('checkAllBtn').addEventListener('click', function() {
                // Èò≤Ê≠¢ÈáçÂ§çÁÇπÂáª
                if (this.disabled) {
                    return;
                }
                
                this.disabled = true;
                this.innerHTML = '<i class="bi bi-hourglass spinner"></i> Ê£ÄÊµã‰∏≠...';
                
                // ÈáçÁΩÆÊâÄÊúâÊ£ÄÊµãÁªìÊûú
                window.detectionResults = {};
                
                // Ê®°ÊãüÊâπÈáèÊ£ÄÊµã
                violationItems.forEach((item, index) => {
                    setTimeout(() => {
                        startDetection(item.id);
                    }, index * 800); // ÂáèÂ∞ëÈó¥ÈöîÊó∂Èó¥ÔºåÊèêÈ´òÊïàÁéá
                });
                
                // Ê£ÄÊµãÂÆåÊàêÂêéÊÅ¢Â§çÊåâÈíÆ
                setTimeout(() => {
                    this.disabled = false;
                    this.innerHTML = '<i class="bi bi-check-all"></i> ‰∏ÄÈîÆÊ£ÄÊµãÂÖ®ÈÉ®';
                    document.getElementById('exportReportBtn').disabled = false;
                    showAIResults();
                }, violationItems.length * 800 + 2000);
            });

            // ÂØºÂá∫Êä•Âëä
            document.getElementById('exportReportBtn').addEventListener('click', function() {
                // Èò≤Ê≠¢ÈáçÂ§çÁÇπÂáª
                if (this.disabled) {
                    return;
                }
                exportDetectionReport();
            });
        }

        // ÂºÄÂßãÂçïÈ°πÊ£ÄÊµã
        function startDetection(itemId) {
            const statusElement = document.getElementById(`status-${itemId}`);
            const button = document.querySelector(`[data-id="${itemId}"] .btn-check`);
            
            // Èò≤Ê≠¢ÈáçÂ§çÁÇπÂáª
            if (button.disabled) {
                return;
            }
            
            // Êõ¥Êñ∞Áä∂ÊÄÅ‰∏∫Ê£ÄÊµã‰∏≠
            statusElement.className = 'status-badge status-checking';
            statusElement.innerHTML = '<i class="bi bi-hourglass spinner"></i> Ê£ÄÊµã‰∏≠...';
            button.disabled = true;
            button.innerHTML = '<i class="bi bi-hourglass spinner"></i> Ê£ÄÊµã‰∏≠...';
            
            // Ê®°ÊãüAIÊ£ÄÊµãËøáÁ®ãÔºà2-3ÁßíÔºâ
            setTimeout(() => {
                const result = simulateDetection(itemId);
                updateDetectionResult(itemId, result);
                updateProgressStats();
            }, Math.random() * 2000 + 1000); // 1-3ÁßíÈöèÊú∫Ê£ÄÊµãÊó∂Èó¥
        }

        // Ê®°ÊãüAIÊ£ÄÊµãÁªìÊûú
        function simulateDetection(itemId) {
            // Ê®°Êãü‰∏çÂêåÁöÑÊ£ÄÊµãÁªìÊûú
            const outcomes = ['compliant', 'violation', 'warning'];
            const weights = [0.6, 0.2, 0.2]; // 60%ÂêàËßÑ, 20%ËøùËßÑ, 20%Ë≠¶Âëä
            
            const random = Math.random();
            let cumulative = 0;
            
            for (let i = 0; i < outcomes.length; i++) {
                cumulative += weights[i];
                if (random <= cumulative) {
                    return {
                        status: outcomes[i],
                        confidence: Math.floor(Math.random() * 20) + 80, // 80-99%ÁΩÆ‰ø°Â∫¶
                        details: generateResultDetails(itemId, outcomes[i])
                    };
                }
            }
            
            return {
                status: 'compliant',
                confidence: 95,
                details: generateResultDetails(itemId, 'compliant')
            };
        }

        // ÁîüÊàêÊ£ÄÊµãÁªìÊûúËØ¶ÊÉÖ
        function generateResultDetails(itemId, status) {
            const item = violationItems.find(item => item.id === itemId);
            
            const details = {
                compliant: {
                    message: `${item.title}Ê£ÄÊµãÂêàËßÑ`,
                    description: 'ÁªèAIÂàÜÊûêÔºåËØ•È°πÁõÆÂÆåÂÖ®Á¨¶ÂêàÊãõÊ†áÊñá‰ª∂Ë¶ÅÊ±ÇÔºåÊó†ËøùËßÑÈ£éÈô©„ÄÇ',
                    suggestions: []
                },
                violation: {
                    message: `${item.title}Â≠òÂú®ËøùËßÑÈ£éÈô©`,
                    description: 'ÁªèAIÂàÜÊûêÔºåÂèëÁé∞ËØ•È°πÁõÆÂ≠òÂú®ÊòéÊòæËøùËßÑÈóÆÈ¢òÔºåÂèØËÉΩÂØºËá¥Â∫üÊ†á„ÄÇ',
                    suggestions: ['ËØ∑‰ªîÁªÜÊ†∏ÂØπÊãõÊ†áÊñá‰ª∂Ë¶ÅÊ±Ç', 'Âª∫ËÆÆË°•ÂÖÖÁõ∏ÂÖ≥ÊùêÊñô', 'Á°Æ‰øùÊ†ºÂºèÂÆåÂÖ®Á¨¶ÂêàË¶ÅÊ±Ç']
                },
                warning: {
                    message: `${item.title}ÈúÄË¶ÅÊ≥®ÊÑè`,
                    description: 'ÁªèAIÂàÜÊûêÔºåËØ•È°πÁõÆÂü∫Êú¨Á¨¶ÂêàË¶ÅÊ±ÇÔºå‰ΩÜÂ≠òÂú®‰∏Ä‰∫õÈúÄË¶ÅÊ≥®ÊÑèÁöÑÈóÆÈ¢ò„ÄÇ',
                    suggestions: ['Âª∫ËÆÆËøõ‰∏ÄÊ≠•Á°ÆËÆ§ÁªÜËäÇ', 'Ê†∏ÂÆûÁõ∏ÂÖ≥Ë¶ÅÊ±ÇÊòØÂê¶ÂÆåÂÖ®Êª°Ë∂≥']
                }
            };
            
            return details[status];
        }

        // Êõ¥Êñ∞Ê£ÄÊµãÁªìÊûú
        // Êõ¥Êñ∞Ê£ÄÊµãÁªìÊûú
        function updateDetectionResult(itemId, result) {
            const statusElement = document.getElementById(`status-${itemId}`);
            const resultElement = document.getElementById(`result-${itemId}`);
            const button = document.querySelector(`[data-id="${itemId}"] .btn-check`);
            
            // Êõ¥Êñ∞Áä∂ÊÄÅÊòæÁ§∫
            const statusConfig = {
                compliant: {
                    class: 'status-badge status-pass',
                    text: 'ÂêàËßÑ'
                },
                violation: {
                    class: 'status-badge status-fail',
                    text: 'ËøùËßÑ'
                },
                warning: {
                    class: 'status-badge status-checking',
                    text: 'Ë≠¶Âëä'
                }
            };
            
            const config = statusConfig[result.status];
            statusElement.className = config.class;
            statusElement.innerHTML = config.text;
            
            // Êõ¥Êñ∞ÁªìÊûúÂàó
            resultElement.innerHTML = `
                <div style="font-size: 0.75rem;">
                    <div style="font-weight: 600; margin-bottom: 2px;">${result.details.message}</div>
                    <div style="color: #6c757d;">ÁΩÆ‰ø°Â∫¶: ${result.confidence}%</div>
                </div>
            `;
            
            // ÊÅ¢Â§çÊåâÈíÆÁä∂ÊÄÅ
            button.disabled = false;
            button.innerHTML = 'ÈáçÊñ∞Ê£ÄÊµã';
            
            // Â≠òÂÇ®ÁªìÊûúÁî®‰∫éÂêéÁª≠ÊòæÁ§∫
            if (!window.detectionResults) {
                window.detectionResults = {};
            }
            window.detectionResults[itemId] = result;
        }

        // Êõ¥Êñ∞ËøõÂ∫¶ÁªüËÆ°
        function updateProgressStats() {
            const results = window.detectionResults || {};
            const total = violationItems.length;
            
            let compliant = 0, violation = 0, warning = 0;
            
            Object.values(results).forEach(result => {
                switch(result.status) {
                    case 'compliant': compliant++; break;
                    case 'violation': violation++; break;
                    case 'warning': warning++; break;
                }
            });
            
            const pending = total - (compliant + violation + warning);
            
            document.getElementById('pendingCount').textContent = pending;
            document.getElementById('compliantCount').textContent = compliant;
            document.getElementById('warningCount').textContent = warning;
            document.getElementById('violationCount').textContent = violation;
        }

        // ÊòæÁ§∫AIÁªºÂêàÂàÜÊûêÁªìÊûú
        function showAIResults() {
            const resultsSection = document.getElementById('aiResultSection');
            const contentElement = document.getElementById('aiResultContent');
            
            const results = window.detectionResults || {};
            
            if (Object.keys(results).length === 0) {
                return;
            }
            
            // ÁªüËÆ°ÁªìÊûú
            let compliant = 0, violation = 0, warning = 0;
            Object.values(results).forEach(result => {
                switch(result.status) {
                    case 'compliant': compliant++; break;
                    case 'violation': violation++; break;
                    case 'warning': warning++; break;
                }
            });
            
            // ÁîüÊàêÁªºÂêàËØÑ‰º∞
            let overallStatus = 'compliant';
            let overallClass = 'result-compliant';
            let overallIcon = 'bi-check-circle-fill';
            let overallMessage = 'ÊäïÊ†áÊñá‰ª∂Êï¥‰ΩìÂêàËßÑ';
            
            if (violation > 0) {
                overallStatus = 'violation';
                overallClass = 'result-violation';
                overallIcon = 'bi-x-circle-fill';
                overallMessage = 'ÊäïÊ†áÊñá‰ª∂Â≠òÂú®ËøùËßÑÈ£éÈô©';
            } else if (warning > 0) {
                overallStatus = 'warning';
                overallClass = 'result-warning';
                overallIcon = 'bi-exclamation-triangle-fill';
                overallMessage = 'ÊäïÊ†áÊñá‰ª∂Âü∫Êú¨ÂêàËßÑÔºåÈúÄÊ≥®ÊÑèÁªÜËäÇ';
            }
            
            // ÁîüÊàêËØ¶ÁªÜÁªìÊûúHTML
            let detailsHtml = '';
            Object.entries(results).forEach(([itemId, result]) => {
                const item = violationItems.find(v => v.id === itemId);
                const resultClass = `result-${result.status}`;
                const resultIcon = {
                    compliant: 'bi-check-circle',
                    violation: 'bi-x-circle', 
                    warning: 'bi-exclamation-triangle'
                }[result.status];
                
                detailsHtml += `
                    <div class="result-item ${resultClass}">
                        <div class="result-title">
                            <i class="bi ${resultIcon}"></i>
                            ${item.title}
                        </div>
                        <div class="result-description">
                            ${result.details.description}
                            ${result.details.suggestions.length > 0 ? 
                                '<br><strong>Âª∫ËÆÆ:</strong> ' + result.details.suggestions.join('Ôºõ') : ''}
                        </div>
                    </div>
                `;
            });
            
            contentElement.innerHTML = `
                <div class="result-item ${overallClass}">
                    <div class="result-title">
                        <i class="bi ${overallIcon}"></i>
                        ÁªºÂêàËØÑ‰º∞ÁªìÊûú
                    </div>
                    <div class="result-description">
                        ${overallMessage}„ÄÇÂÖ±Ê£ÄÊµã ${Object.keys(results).length} È°πÔºö
                        ÂêàËßÑ ${compliant} È°πÔºåË≠¶Âëä ${warning} È°πÔºåËøùËßÑ ${violation} È°π„ÄÇ
                        ${violation > 0 ? 'Âª∫ËÆÆÈáçÁÇπÂÖ≥Ê≥®ËøùËßÑÈ°πÁõÆÔºåÂèäÊó∂‰øÆÊ≠£ÂêéÈáçÊñ∞Ê£ÄÊµã„ÄÇ' : ''}
                    </div>
                </div>
                ${detailsHtml}
            `;
            
            resultsSection.style.display = 'block';
        }

        // ÂØºÂá∫Ê£ÄÊµãÊä•Âëä
        function exportDetectionReport() {
            const results = window.detectionResults || {};
            
            if (Object.keys(results).length === 0) {
                showToast('warning', 'ËØ∑ÂÖàÂÆåÊàêÊ£ÄÊµãÂÜçÂØºÂá∫Êä•Âëä');
                return;
            }
            
            // ÊòæÁ§∫ÂØºÂá∫ËøõÂ∫¶
            const exportBtn = document.getElementById('exportReportBtn');
            const originalText = exportBtn.innerHTML;
            exportBtn.disabled = true;
            exportBtn.innerHTML = '<i class="bi bi-hourglass spinner"></i> ÁîüÊàê‰∏≠...';
            
            setTimeout(() => {
                // ÁîüÊàêÊä•ÂëäÂÜÖÂÆπ
                let reportContent = 'ÊäïÊ†áÊñá‰ª∂ÂêàËßÑÊÄßÊ£ÄÊµãÊä•Âëä\n';
                reportContent += '='*50 + '\n';
                reportContent += 'ÁîüÊàêÊó∂Èó¥Ôºö' + new Date().toLocaleString() + '\n';
                reportContent += 'Ê£ÄÊµãÂ∑•ÂÖ∑ÔºöBidAnalysis Tool\n\n';
                
                // ÁªüËÆ°ÊëòË¶Å
                let compliant = 0, violation = 0, warning = 0;
                Object.values(results).forEach(result => {
                    switch(result.status) {
                        case 'compliant': compliant++; break;
                        case 'violation': violation++; break;
                        case 'warning': warning++; break;
                    }
                });
                
                reportContent += 'Ê£ÄÊµãÊëòË¶ÅÔºö\n';
                reportContent += '-'*20 + '\n';
                reportContent += `ÊÄªÊ£ÄÊµãÈ°πÁõÆÔºö${Object.keys(results).length} È°π\n`;
                reportContent += `ÂêàËßÑÈ°πÁõÆÔºö${compliant} È°π\n`;
                reportContent += `Ë≠¶ÂëäÈ°πÁõÆÔºö${warning} È°π\n`;
                reportContent += `ËøùËßÑÈ°πÁõÆÔºö${violation} È°π\n`;
                reportContent += `ÂêàËßÑÁéáÔºö${((compliant / Object.keys(results).length) * 100).toFixed(1)}%\n\n`;
                
                // ËØ¶ÁªÜÁªìÊûú
                reportContent += 'ËØ¶ÁªÜÊ£ÄÊµãÁªìÊûúÔºö\n';
                reportContent += '-'*20 + '\n';
                Object.entries(results).forEach(([itemId, result], index) => {
                    const item = violationItems.find(v => v.id === itemId);
                    reportContent += `\n${index + 1}. ${item.title}\n`;
                    reportContent += `   Á±ªÂà´Ôºö${item.category}\n`;
                    reportContent += `   Áä∂ÊÄÅÔºö${result.status === 'compliant' ? '‚úì ÂêàËßÑ' : result.status === 'violation' ? '‚úó ËøùËßÑ' : '‚ö† Ë≠¶Âëä'}\n`;
                    reportContent += `   ÁΩÆ‰ø°Â∫¶Ôºö${result.confidence}%\n`;
                    reportContent += `   ËØ¥ÊòéÔºö${result.details.description}\n`;
                    if (result.details.suggestions.length > 0) {
                        reportContent += `   Âª∫ËÆÆÔºö${result.details.suggestions.join('Ôºõ')}\n`;
                    }
                    reportContent += '\n' + '-'*40 + '\n';
                });
                
                reportContent += '\nÊä•ÂëäÁªìÊùü\n';
                reportContent += 'Ê≥®ÔºöÊú¨Êä•ÂëäÁî±AIÊô∫ËÉΩÂàÜÊûêÁîüÊàêÔºå‰ªÖ‰æõÂèÇËÄÉÔºåËØ∑ÁªìÂêàÂÆûÈôÖÊÉÖÂÜµÂà§Êñ≠„ÄÇ';
                
                // ÂàõÂª∫‰∏ãËΩΩÈìæÊé•
                const blob = new Blob([reportContent], { type: 'text/plain;charset=utf-8' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `ÊäïÊ†áÊñá‰ª∂ÂêàËßÑÊÄßÊ£ÄÊµãÊä•Âëä_${new Date().toISOString().slice(0, 10)}.txt`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                // ÊÅ¢Â§çÊåâÈíÆÁä∂ÊÄÅ
                exportBtn.disabled = false;
                exportBtn.innerHTML = originalText;
                
                // ÊòæÁ§∫ÊàêÂäüÊèêÁ§∫
                showToast('success', 'Ê£ÄÊµãÊä•ÂëäÂ∑≤ÂØºÂá∫Âà∞‰∏ãËΩΩÊñá‰ª∂Â§π');
            }, 1500); // Ê®°ÊãüÁîüÊàêÊó∂Èó¥
        }

        // ÊòæÁ§∫ÊèêÁ§∫Ê∂àÊÅØ
        function showToast(type, message) {
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed;
                top: 80px;
                right: 20px;
                padding: 12px 20px;
                border-radius: 8px;
                color: white;
                font-weight: 500;
                z-index: 9999;
                max-width: 300px;
                word-wrap: break-word;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                animation: slideIn 0.3s ease-out;
            `;
            
            const icons = {
                success: 'bi-check-circle',
                warning: 'bi-exclamation-triangle',
                error: 'bi-x-circle'
            };
            
            const colors = {
                success: 'linear-gradient(135deg, #10b981, #059669)',
                warning: 'linear-gradient(135deg, #f59e0b, #d97706)',
                error: 'linear-gradient(135deg, #ef4444, #dc2626)'
            };
            
            toast.style.background = colors[type] || colors.success;
            toast.innerHTML = `<i class="bi ${icons[type] || icons.success}"></i> ${message}`;
            
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), type === 'error' ? 5000 : 3000);
        }

        // ‰∏ªÈ¢òÂàáÊç¢ÂäüËÉΩ
        function initThemeSwitcher() {
            const themeToggle = document.getElementById('themeToggle');
            const themeDropdown = document.getElementById('themeDropdown');
            const themeItems = document.querySelectorAll('.theme-item');
            const savedTheme = localStorage.getItem('bidAnalysisTheme') || 'default';
            
            // Â∫îÁî®‰øùÂ≠òÁöÑ‰∏ªÈ¢ò
            if (savedTheme !== 'default') {
                document.documentElement.setAttribute('data-theme', savedTheme);
            }
            
            // Êõ¥Êñ∞ÊøÄÊ¥ªÁä∂ÊÄÅ
            themeItems.forEach(item => {
                item.classList.remove('active');
                if (item.dataset.theme === savedTheme) {
                    item.classList.add('active');
                }
            });
            
            // ‰∏ªÈ¢ò‰∏ãÊãâÊ°ÜÂàáÊç¢
            themeToggle.addEventListener('click', (e) => {
                e.stopPropagation();
                themeDropdown.classList.toggle('show');
            });
            
            // ÁÇπÂáªÂ§ñÈÉ®ÂÖ≥Èó≠‰∏ãÊãâÊ°Ü
            document.addEventListener('click', () => {
                themeDropdown.classList.remove('show');
            });
            
            // Èò≤Ê≠¢ÁÇπÂáª‰∏ãÊãâÊ°ÜÂÜÖÈÉ®Êó∂ÂÖ≥Èó≠
            themeDropdown.addEventListener('click', (e) => {
                e.stopPropagation();
            });
            
            // ‰∏ªÈ¢òÈÄâÊã©
            themeItems.forEach(item => {
                item.addEventListener('click', () => {
                    const theme = item.dataset.theme;
                    
                    // ÁßªÈô§ÊâÄÊúâÊøÄÊ¥ªÁä∂ÊÄÅ
                    themeItems.forEach(i => i.classList.remove('active'));
                    
                    // Ê∑ªÂä†ÂΩìÂâçÊøÄÊ¥ªÁä∂ÊÄÅ
                    item.classList.add('active');
                    
                    // Â∫îÁî®‰∏ªÈ¢ò
                    if (theme === 'default') {
                        document.documentElement.removeAttribute('data-theme');
                    } else {
                        document.documentElement.setAttribute('data-theme', theme);
                    }
                    
                    // ‰øùÂ≠ò‰∏ªÈ¢òËÆæÁΩÆ
                    localStorage.setItem('bidAnalysisTheme', theme);
                    
                    // ÂÖ≥Èó≠‰∏ãÊãâÊ°Ü
                    themeDropdown.classList.remove('show');
                    
                    // Ê∑ªÂä†ÂàáÊç¢Âä®ÁîªÊïàÊûú
                    document.body.style.transition = 'all 0.3s ease';
                    setTimeout(() => {
                        document.body.style.transition = '';
                    }, 300);
                });
            });
        }
    </script>
    
    <!-- È°µËÑö‰ø°ÊÅØ -->
    <div class="page-footer">
        Âü∫‰∫éÂèÇËÄÉÊ†áÂáÜÁöÑÈÄêÈ°πÂêàËßÑÊÄßÊ£ÄÊü• | Êô∫ËÉΩËØÜÂà´Â∫üÊ†áÈ£éÈô©ÁÇπ | Êèê‰æõ‰∏ì‰∏öÊîπËøõÂª∫ËÆÆ
    </div>
</body>

</html>
